bitrate: 500000
priority_levels:
  TIME_CRITICAL:  0   #   Data that MUST be received in realtime for safety stuff.
  HIGH:           1   #   Data that should be prioritized above normal.
  NORMAL:         2   #   Default priority.
  LOW:            3   #   Messages not necessary for functioning of the car.
  DEBUG:          4   #   Debug output from nodes, CAN boot loader flashing stuff, config settings, etc.
nodes:
  BMS:
    !Node
    subscribe:
      - VCU_pedals
      - VCU_switches
    publish:
      DRIVE_STATE:
        !Message
        priority: 'LOW'
        fields:
          state: 'uint8_t'
      IMD_status:
        !Message
        id: 0x69
        priority: 'TIME_CRITICAL'
        fields:
          frequency: 'uint32_t'
      GPIO:
        !Message
        id: 0x1234
        priority: 'NORMAL'
        fields:
          bitfield:
            - bms_fault
            - bms_fault_latch
            - HS_closed
            - LS_closed
            - shutdown_closed
            - final_closed
            - IMD_faulted
            - IMD_fault_latched
      BMS_analog_in_raw:
        !Message
        priority: 'NORMAL'
        fields:
          Vbat: 'uint16_t'
          Vcar: 'uint16_t'
          current_pos: 'uint16_t'
          current_neg: 'uint16_t'
      BMS_current:
        !Message
        priority: 'NORMAL'
        fields:
          amps: 'float'
      BMS_contactor_volt_delta:
        !Message
        priority: 'NORMAL'
        fields:
          volts: 'float'
      BMS_status_1:
        !Message
        priority: 'NORMAL'
        id: 0x6B0
        fields:
          fake: 'uint8_t'
          pack_current: 'int16_t'
          pack_voltage: 'int16_t'
          pack_soc: 'uint8_t'
          status_1_bitfield:
            - MPI2_state
            - MPI3_state
            - MPO2_state
            - MPO3_state
            - MPO4_state
            - MP_enable_state
            - MPO1_state
            - discharge_relay_state
            - charge_relay_state
            - charger_safety_state
            - MIL_state
            - MPI1_state
            - alwayson_state
            - is_ready_state
            - is_charging_state
      BMS_status_2:
        !Message
        priority: 'NORMAL'
        id: 0x6B1
        fields:
          fake: 'uint8_t'
          pack_DCL: 'uint16_t'
          pack_CCL: 'int8_t'
          pack_high_temp: 'int8_t'
          pack_low_temp: 'int8_t'
  INVERTER:
    !Node
    subscribe:
      ~
    publish:
      placeholder:
        !Message
        priority: 'TIME_CRITICAL'
        fields:
          fake: 'uint16_t'
  VCU:
    !Node
    subscribe:
      ~
    publish:
      VCU_pedals:
        !Message
        priority: 'TIME_CRITICAL'
        fields:
          APPS1: 'uint16_t'
          APPS2: 'uint16_t'
          BRAKE: 'uint16_t'
          EXTRA: 'uint16_t'
      VCU_switches:
        !Message
        priority: 'TIME_CRITICAL'
        fields:
          switch_bitfield:
            - button1
            - button2
            - button3
            - button4
            - button5
            - button6
            - button7
            - button8
